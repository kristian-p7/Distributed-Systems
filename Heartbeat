# Interpreter Class mit User-ID ( Z. 160-172)
class MessageInterpreter():
    def __init__(self, data):
        self.msg = decodeMessage(data)
        self.command = self.msg['cmd']
        self.content = self.msg['msg'] # Often it is an ip address, except the command is "GAME"
        self.id = self.msg['uuid']
        self.my_ip_addr = IP_ADDR
        self.my_id = UUID
        global leaderIpAndUUID
        global peers
        global leader
        global BSender
        global game



# Listener for Heartbeat TCP messages (Fault Tolerance) (Z.320)
class HeartbeatListener(Thread):
    def __init__(self, heartbeat_port, UUID):
        Thread.__init__(self)
        self.heartbeat_port = heartbeat_port
        self.host = socket.gethostname()
        self.ip_addr = IP_ADDR
        self.UUID = UUID
        if debug: print("Heartbeat started ", self.ip_addr ," listening ... ", self.heartbeat_port)
        self.running = True

def terminate(self):
        self.running = False

    def run(self):
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        #s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
        s.bind(('', self.heartbeat_port))
        s.listen(5)


